---
title: ä¸ƒå‘¨ä¸ƒæ•°æ®åº“
date: 2017-06-29
tags: mysql, riak, redis, hbase
---
ä¸ƒå‘¨ä¸ƒæ•°æ®åº“
--------
[Postgres](#postgres)
[Riak](#riak)
[Rbase](#hbase)
[MongoDB](#mongodb)

### æ¦‚è¿°
  * é€‰å–é‚£ç§æ•°æ®åº“èƒ½å¤Ÿæœ€å¥½çš„è§£å†³ä½ çš„é—®é¢˜
  * æ•°æ®åº“ç±»å‹ï¼šå…³ç³»å‹(Postgres)ã€é”®å€¼ç±»å‹(Riak, Redis)ã€å¤šåˆ—å‹(Hbase)ã€é¢å‘æ–‡æ¡£å‹(MongoDb, CouchDb)ã€å›¾å‹(Neo4j)
  * æ¨¡å¼æ˜¯æ•°æ®åº“æ‰€å¼ºåˆ¶çš„ä¸€ä¸ªåˆšæ€§æ¡†æ¶
  * å®ç°æ¨ªå‘æ‰©å±•ï¼ˆMongoDBï¼Œ Hbaseã€Riakï¼‰ï¼Œ çºµå‘æ‰©å±•ï¼ˆPostgresã€Neo4jã€Redisï¼‰
  * å…³ç³»å‹æ•°æ®åº“ï¼š Mysql, H2, HSQLDB,SQLite,
  * é”®å€¼æ•°æ®åº“ï¼Œ KVï¼Œ å› ä¸ºå¯¹èµ„æºçš„è¦æ±‚éå¸¸å°‘ï¼Œæ‰€ä»¥ä¼šæœ‰ç€é«˜æ€§èƒ½ï¼Œ ä½†æ˜¯å½“ä½ æœ‰å¤æ‚çš„æŸ¥è¯¢å’Œèšåˆçš„éœ€æ±‚æ—¶å€™ï¼Œä¸ä¼šæœ‰å¸®åŠ©
  * åˆ—å‹æ•°æ®åº“ï¼šå¤§çº¦ä»‹äºå…³ç³»æ•°æ®åº“-é”®å€¼æ•°æ®åº“ä¹‹é—´HBase
  * æ–‡æ¡£å‹æ•°æ®åº“ï¼šå­˜å‚¨çš„å°±æ˜¯æ–‡æ¡£ï¼Œ æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„IBæ ‡è¯†
  * å›¾æ•°æ®åº“ï¼šåœ¨æ•°æ®ä¸­å»ºç«‹è”ç³»ï¼Œ å¦‚ç¤¾äº¤ç½‘ç»œ

## postgres
  1. åºå¤§çš„ç‰¹æ€§é›†åˆï¼ˆè§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹ã€é«˜çº§ç´¢å¼•ã€æ•°æ®å®‰å…¨æ€§ï¼‰ï¼Œ æŸ¥è¯¢çµæ´»ï¼Œæ¨¡å¼æ˜¯è§„èŒƒçš„ã€‚
  2. äº‹åŠ¡ä¿è¯ä¸€è‡´æ€§ï¼Œ ç´¢å¼•ï¼Œè¿æ¥æŸ¥è¯¢ã€‚
  3. å­˜å‚¨è¿‡ç¨‹ï¼Œ å¯ä»¥å‡å°‘å®¢æˆ·ç«¯ä»£ç çš„ç¼–å†™ï¼Œæé«˜æ€§èƒ½ï¼Œä½†æ˜¯ï¼Œ å´å†³å®šä¸æ•°æ®åº“çš„ç»‘å®šï¼Œ
  4. è§†å›¾ï¼Œcreate View
  5. å…¨æ–‡ç´¢å¼• TSVector TSQueryï¼Œ Lucence, Sphinxï¼Œ æœç´¢å¼•æ“

  ä¼˜ç‚¹:
   > ç¬¦åˆACIDï¼Œç¡®ä¿æäº¤çš„é™¢å­å‹ï¼Œä¸€è‡´æ€§ï¼Œ éš”ç¦»å’ŒæŒä¹…, æ•°æ®æ¨¡å¼éå¸¸è§„èŒƒï¼Œé€šè¿‡ä¼˜åŒ–ï¼ˆå»ºç«‹ç´¢å¼•ç­‰ï¼‰å¯ä»¥è½»æ¾å¤„ç†TBçš„æ•°æ®

  ç¼ºç‚¹:
  > åˆ†åŒºä¸æ˜¯å¼ºé¡¹ï¼Œæ•°æ®è¦æ±‚æ¯”è¾ƒä¸¥æ ¼ï¼Œå¦‚æœæ•°æ®è¿‡äºçµæ´»ï¼Œä¸æ˜¯å¾ˆå®¹æ˜“èå…¥åˆ°å…³ç³»æ•°æ®åº“ä¸¥æ ¼çš„æ•°æ®æ¨¡å¼ä¸­ï¼Œæˆ–è€…ä¸éœ€è¦ä¸€ä¸ªå®Œæ•´çš„æ•°æ®åº“åŠŸèƒ½å¸¦æ¥çš„å¼€é”€ï¼Œéœ€è¦è¿›å‚éå¸¸å¤§é‡çš„é”®å€¼å¯¹è¯»å†™çš„æ“ä½œ

### riak
  1. åˆ†å¸ƒå¼çš„é”®å€¼æ•°æ®åº“ï¼Œå€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œ æ™®é€šæ–‡æœ¬ï¼Œjsonï¼Œxmlï¼Œå›¾ç‰‡ï¼ŒéŸ³é¢‘ç­‰ã€‚å¯¹äº’è”ç½‘å‹å¥½ï¼Œå¯ä»¥é€šè¿‡URLï¼Œhttpæ–¹å¼æŸ¥è¯¢
  2. å®¹é”™ï¼š æœåŠ¡å™¨å¯ä»¥åœ¨ä»»ä½•æ—¶åˆ»å¯åŠ¨æˆ–è€…åœæ­¢ï¼Œè€Œä¸ä¼šå¼•èµ·ä»»ä½•å•ç‚¹æ•…éšœï¼Œï¼ˆéå¸¸æ³¨é‡å¯ä»¥å†™å…¥æ€§ã€‚ã€‚ã€‚ä¸ºçš„æ˜¯å¯ä»¥å›å®¶ç¡è§‰ï¼‰
  3. ç¼ºç‚¹ï¼šå¯¹äºè‡ªå®šä¹‰çš„æŸ¥è¯¢ç¼ºä¹æ”¯æŒï¼Œ é”®å€¼çš„å­˜å‚¨è®¾è®¡ï¼Œæ˜¯æ•°æ®å€¼æ— æ³•è¿›è¡Œè¿æ¥ï¼ˆå¤–é”®ï¼‰

##### Riak ä¸­çš„æ¶æ„è®¾è®¡
  1. ç¯çŠ¶ï¼šä¸ªä¸ªèŠ‚ç‚¹åŠ å…¥åˆ°ä¸€ä¸ªç¯ï¼Œ æ¯ä¸ªVnodeä»£è¡¨ä¸€ç³»åˆ—ç»è¿‡hashçš„é”®ï¼Œè¿™ä¸ªå¯ä»¥é€šè¿‡è®¡ç®—hashå¯å¿«é€Ÿå¯»æ‰¾é”®å€¼
  2. Riakä¸­å†™å…¥å¯¹è±¡æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šåˆ›å»ºè¿™ä¸ªå€¼çš„å‰¯æœ¬ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼Œè¿˜æœ‰å¦ä¸€ä¸ªèŠ‚ç‚¹çš„å‰¯æœ¬å¯ä»¥ä½¿ç”¨.ä¸‰ä¸ªæ•°å€¼ï¼Œ Nï¼Œ Wï¼Œ Rï¼Œ ï¼šnç¬¬ä¸€æ¬¡å†™å…¥æœ€ç»ˆå¤åˆ¶çš„èŠ‚ç‚¹æ•°é‡ï¼Œ é›†ç¾¤ä¸­çš„å‰¯æœ¬æ•°é‡ï¼ŒWï¼Œ ç¬¬ä¸€æ¬¡æˆåŠŸå†™å…¥è¿”å›å‰ï¼Œå¿…é¡»æˆåŠŸå†™å…¥çš„èŠ‚ç‚¹æ•°ï¼ŒRæ˜¯æˆåŠŸè¯»å–ä¸€é¡¹æ•°æ®æ‰€å¿…é¡»çš„èŠ‚ç‚¹æ•°ï¼Œ
  3. å‘é‡æ—¶é’Ÿï¼Œ è§£å†³å†²çªï¼š
  4. å¯ä»¥ä½¿ç”¨Erlangï¼Œ Javascriptï¼Œå†™å‡½æ•°ï¼Œæäº¤å‰åçš„å›è°ƒå‡½æ•°
  5. æœç´¢ï¼š å¦‚æœä½ æ‰“ç®—ä¸ºå¤§è§„æ¨¡webåº”ç”¨æä¾›æœç´¢åŠŸèƒ½ï¼Œ Riakæ˜¯ä¸€ä¸ªæ˜ç¡®çš„é€‰æ‹©ã€‚ ä½†æ˜¯ä½ éœ€è¦å¤§é‡ç®€ç­”çš„è‡ªæœ‰å®šä¹‰çš„æŸ¥è¯¢ï¼Œåˆ™ä¸æ˜¯æ˜æ™ºçš„

  ä¼˜ç‚¹:
  > è‡´åŠ›äºæœ€é«˜å¯ç”¨æ€§ï¼Œ é¿å…å•ç‚¹æ•…éšœï¼Œå¦‚æœä½¿ç”¨Erlangå°±èƒ½å¤Ÿæ‰©å±•Riakçš„æ ¸å¿ƒï¼Œmap reduce

  ç¼ºç‚¹:
  > æ²¡æœ‰ä¸¥æ ¼çš„æ•°æ®ç»“æ„ï¼Œæ•°æ®æ¨¡å¼ï¼Œ è‡ªå®šä¹‰æŸ¥è¯¢å¾ˆå¼±ã€‚


### hbase

  ä¼˜ç‚¹ï¼š
  > å€¼å¾—æ³¨æ„çš„ç‰¹æ€§ï¼šå¥å£®çš„å¯ä¼¸ç¼©æ¶æ„ï¼Œ å†…ç½®çš„ç‰ˆæœ¬ï¼Œå‹ç¼©åŠŸèƒ½ã€‚ ä¿å­˜wikié¡µé¢ï¼Œè‡ªåŠ¨å®ç°äº†ç‰ˆæœ¬ç®¡ç†

  ç¼ºç‚¹ï¼š
  > 5ä¸ªèŠ‚ç‚¹æ˜¯æœ€å°çš„é…ç½®ï¼Œ å­¦ä¹ æ›²çº¿é™¡å³­ï¼Œé™¤äº†è¡Œé”®ä¹‹å¤–ï¼Œä¸æä¾›ä»»ä½•ç´¢å¼•åŠŸèƒ½ï¼Œä¸æä¾›æ’åºï¼Œ æ‰€ä»¥å¦‚æœä¸èƒ½ä½¿ç”¨è¡Œé”®æŸ¥æ‰¾ï¼Œå°±åªèƒ½ä½¿ç”¨æ‰«æè¡¨ï¼Œæˆ–è€…è‡ªå·±ç»´æŠ¤ç´¢å¼•ï¼Œ æ•°æ®ç±»å‹çš„ç¼ºå¤±ï¼š æ‰€æœ‰å­—æ®µçš„æ•°å€¼éƒ½ä½œä¸ºä¸è§£é‡Šçš„å­—èŠ‚æ•°ç»„ï¼Œ æ¯”å¦‚æ•´æ•°å€¼ã€å­—ç¬¦ä¸²ã€æ—¥æœŸä¹‹ç±»çš„ï¼Œå¯¹è¿™äº›çš„è§£é‡Šå–å†³ç‰åº”ç”¨ç¨‹åºã€‚

### mongodb
  1. æ–‡æ¡£æ•°æ®åº“ï¼Œå…è®¸æ•°æ®ä»¥åµŒå¥—å½¢å¼çš„çŠ¶æ€ä¿å­˜ï¼Œ æ²¡æœ‰æ¨¡å¼ï¼Œ
  2. å…³ç³»æ•°æ®åº“æœ‰å¼ºå¤§çš„æŸ¥è¯¢èƒ½åŠ›ï¼Œ Riakï¼Œ Hbaseåˆ†å¸ƒå¼å­˜å‚¨çš„ç‰¹ç‚¹ï¼ŒMongoåœ¨è¿™ä¿©æ˜‚ç€ä¹‹å‰æ‰¾åˆ°äº†æœ€ä½³ç»“åˆç‚¹ï¼Œ ä¿å­˜å¤§è§„æ¨¡æ•°æ®ï¼Œ åˆèƒ½æ»¡è¶³è‡ªæœ‰å®šä¹‰çš„æŸ¥è¯¢ã€‚ æ˜¯ä¸€ä¸ªjsonæ–‡æ¡£æ•°æ®åº“ï¼Œèƒ½å¤Ÿæ— é™çš„åµŒå¥—ã€‚
  3. å®‰è£…ä¸€èˆ¬éœ€è¦å…ˆåˆ›å»ºæ•°æ®å­˜å‚¨ä½ç½®ï¼Œ /data/db, mongod
  4. Mongoä¸æ”¯æŒjoinæ“ä½œ
  5. db.users.find(function(){ return this.age > 50 && this.age < 100})ä½¿ç”¨å‡½æ•°ä½œä¸ºfindå‚æ•°çš„ï¼Œæœ€ååœ¨è€ƒè™‘ï¼Œå› ä¸ºæŸ¥è¯¢å¾ˆæ…¢ï¼Œä¸èƒ½ä½¿ç”¨ç´¢å¼•ã€‚
  6. Map Reduce, db.runCommand({mapReduce: 'tables', map: map_fun, reduce: reduce_fun, out: 'result_tables'})
  7. å‰¯æœ¬é›†åˆï¼Œ åˆ†ç‰‡ï¼Œåœ°ç†ç©ºé—´ï¼Œ GridFSï¼Œ

  ä¼˜ç‚¹ï¼š
  > èƒ½å¤Ÿé€šè¿‡å¤åˆ¶å’Œæ¨ªå‘ä¼¸ç¼©ï¼Œ å¤„ç†å¤§é‡çš„æ•°æ®ï¼Œ+ éå¸¸çµæ´»çš„æ•°æ®æ¨¡å‹ï¼Œå¼ºå¤§çš„SQL

  ç¼ºç‚¹ï¼š
  >  é¼“åŠ±åè§„èŒƒåŒ–çš„æ¨¡å¼ï¼Œ å°†ä»»æ„ç±»å‹çš„æ•°æ®æ’å…¥é›†åˆä¸­ï¼Œæ˜¯å¾ˆå±é™©çš„ã€‚éœ€è¦åŠªåŠ›å»è®¾è®¡å’Œç®¡ç†ã€‚


### redis
    1. redis-server, redis-cli
    2. redis æ•°æ®ç±»å‹ï¼ŒLists, Sets, Sorted sets, Hashes, Bit arrays, HyperLogLogs
    3. redis keys 
       * ç©ºå€¼å¯ä»¥æ˜¯key
       * å¤ªé•¿å¤ªæµªè´¹ç©ºé—´ï¼Œã€€å¤ªçŸ­å®¹æ˜“é€ æˆå†²çª
       * åšæŒä½¿ç”¨ä¸€ç§æ¨¡å¼
    4. å‘½ä»¤é›†åˆ: 
       * set, get, incr, decr, mset, exists, type, expire, ttl
       * list rpush, lpush, lrange, rpop, del, llen, lpop, 
       * hash, hmset, hget, hgetall, 
       * sets, sadd, smembers, sismember, sinter, sunionstore, spop, scard, 
